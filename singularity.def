Bootstrap: docker
From: debian:11.5

%post
apt-get update && apt-get upgrade -y
apt-get install -y \
  make \
  libx11-dev \
  libxpm-dev \
  libxft-dev \
  libxext-dev \
  libxmu-dev \
  libxml2-dev \
  binutils \
  git \
  cmake \
  wget \
  libglu1-mesa-dev \
  python3-dev \
  debianutils nano \
  tar \
  gdb vim valgrind zip tmux git-lfs patch libssl-dev libfftw3-dev 
apt-get install -y \
  build-essential binutils gfortran automake gcc-multilib g++-multilib python3 python3-dev \
  gdb libc6-dbg

mkdir /software

%environment
export USE_RTK=ON

# GATE_ROOT_DIR contains all the
# - sources (src),
# - compilation artifacts (bin) and
# - installation files (install)
# of all the dependencies:
# - CLHEP
# - Geant4
# - ITK
# - ROOT
# - GATE itself
# Preferably this is /software inside the container, and
# linked to a directory on the host system.
export GATE_ROOT_DIR=/software

export PATH=/software/cmake-3.18.4-Linux-x86_64/bin/:$PATH

%runscript
. /software/scripts/source-dep.sh
/bin/bash

